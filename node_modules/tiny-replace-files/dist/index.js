var x=Object.create;var g=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,Y=Object.prototype.hasOwnProperty;var h=e=>g(e,"__esModule",{value:!0});var _=(e,r)=>{for(var n in r)g(e,n,{get:r[n],enumerable:!0})},m=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of A(r))!Y.call(e,s)&&(n||s!=="default")&&g(e,s,{get:()=>r[s],enumerable:!(t=I(r,s))||t.enumerable});return e},z=(e,r)=>m(h(g(e!=null?x(N(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),C=(e=>(r,n)=>e&&e.get(r)||(n=m(h({}),r,1),e&&e.set(r,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var k={};_(k,{default:()=>R,replaceStringInFiles:()=>E,replaceStringInFilesSync:()=>q});var l=z(require("fs")),p=require("fast-glob"),y=e=>{var i;let r={ignore:[],encoding:"utf-8",disableGlobs:!1,countMatches:!1,freeze:!1,glob:{}};if(typeof e!="object"||e===null)throw new Error("options type error");e.glob=(i=e.glob)!=null?i:{};let{files:n,from:t,to:s,ignore:o,encoding:c}=e;if(typeof n=="undefined")throw new Error("files type error");if(typeof t=="undefined")throw new Error("from type error");if(typeof s=="undefined")throw new Error("to type error");return Array.isArray(n)||(e.files=[n]),Array.isArray(o)||(e.ignore=o?[o]:[]),c||(e.encoding="utf-8"),Object.assign({},r,e)},O=(e,r)=>{let{ignore:n,disableGlobs:t,glob:s}=r;return t?Promise.resolve(e):G(e,n,s)},b=(e,r)=>{let{ignore:n,disableGlobs:t,glob:s}=r;return t?e:M(e,n,s)},G=(e,r,n)=>(n=Object.assign({ignore:r,nodir:!0},n),p(e,n)),M=(e,r,n)=>(n=Object.assign({ignore:r,nodir:!0},n),p.sync(e,n)),T=(e,r,n,t,s)=>{let o={file:t,changed:!1},c=r;if(typeof r=="function"&&(c=r(t)),typeof c=="string"&&(c=new RegExp(c,"g")),s){let a=e.match(c);if(a){let f=a.filter(u=>u!==n);o.matchCounts=a.length,o.replaceCounts=f.length}}let i=e.replace(c,n);return o.changed=i!==e,{result:o,newContents:i}},w=(e,r)=>{let{from:n,to:t,encoding:s,freeze:o,countMatches:c}=r;return new Promise((i,a)=>{l.readFile(e,{encoding:s},(f,u)=>{if(f)return a(f);let{result:S,newContents:F}=T(u,n,t,e,c);if(!S.changed||o)return i(S);l.writeFile(e,F,s,d=>{if(d)return a(d);i(S)})})})},P=(e,r)=>{let{from:n,to:t,encoding:s,freeze:o,countMatches:c}=r,i=l.readFileSync(e,s),{result:a,newContents:f}=T(i,n,t,e,c);return!a.changed||o||l.writeFileSync(e,f,s),a};var E=e=>{try{e=y(e)}catch(t){return Promise.reject(t)}let{files:r,freeze:n}=e;return n&&console.warn("running in freeze mode, no change..."),O(r,e).then(t=>Promise.all(t.map(s=>w(s,e))))},q=e=>{e=y(e);let{files:r,freeze:n}=e,t=b(r,e);return n&&console.warn("running in freeze mode, no change..."),Array.isArray(t)?t.map(s=>P(s,e)):P(t,e)},R=E;module.exports=C(k);0&&(module.exports={replaceStringInFiles,replaceStringInFilesSync});
